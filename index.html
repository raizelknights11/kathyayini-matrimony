<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrimony Directory</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20,400,0,0" />
    <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="DetailsPageStyle.css">
</head>

<body>

<div id="connection-status"></div>

<header>
    <h1>Kamala Matrimony Directory</h1>
</header>

<div id="galleryPage">
    <div style="padding: 20px 0 0 0;">
        <input type="text" id="search" placeholder="Search name, education, or job..." onkeyup="search()">

        <div class="stats-bar" id="statsBar">
            <div class="stat-item stat-all active-filter" id="btnAll" onclick="filterType('all')">All</div>
            <div class="stat-item stat-groom" id="btnGroom" onclick="filterType('groom')">Grooms: 0</div>
            <div class="stat-item stat-bride" id="btnBride" onclick="filterType('bride')">Brides: 0</div>
        </div>
    </div>
    <div class="container" id="cardContainer"></div>
</div>

<div id="detailView"></div>

<div id="imgModal" class="modal" onclick="closeModal()">
    <span class="close-modal">&times;</span>
    <img class="modal-content" id="fullImg">
</div>

<footer>
    <p>&copy; 2024 Kamala Matrimony | Confidential</p>
</footer>

<script>
    const db = [["Unique ID","Timestamp","Email Address","Phone Number","Filling the Form For","Name","Date Of Birth","Time Of Birth","Place of Birth","Marital Status","Nakshatra","Charana","Rashi","Gothra","Sub Caste","ಮಠ - Mata","Education ","Work Field","Currently Working-In(Company Name) and As(Position)","Salary(LPA)","Father's Name","Occupation ","Phone Number","Father's Native","Mother's Name","Occupation ","Phone Number","Mother's Native","Siblings","Address","Staying In","Planning To Relocate","Height (in feet) - example 5 / 5`2 / 5`11","Mention your degrees ","Age Gap","Will agree on Same Gothra","Will agree on any Bhramins and Mata","Required Martial Status","Abroad Relocation ","Language Preference ","Habits","If currently not staying in Bengaluru Please mention the city","Local Relocation","Habits","Photo 1 - of Bride or Groom","Photo 2 - of Bride or Groom","Horoscope","* I Herby declare that the above particulars furnished is true and correct for the best of my knowledge and for the purpose of finding bride/ groom for self or family members only and will not use profiles for any commercial purposes including agent activities/ brokerage activities or sharing and forwarding to other groups or platforms. I Accept all terms and conditions of Kathyayini Matrimony Services","","","","","","","","","","","","","",],["B20251119001","11/19/2025 9:25:57","sushmithaasharma@gmail.com","9791338697","Bride","Susmithaa N","5/29/97","10:45:00 pm","Dharmapuri ","","","","","Vasishtha","Smartha","Sringeri ","Doctor ","Pursuing MD in Mandya ","MANDYA INSTITUTE OF MEDICAL SCIENCES ","50k (stipend)","Nagarajan ","Retd person from Ashok Leyland ","9791338697","Hosur","Nagarathna ","House Wife ","9003449679","Hosur","Sisters","Terracon homes layout , Chandapura ","India","To India","5’3”","MBBS , MD ","Up to 4","No","No","Unmarried Only","India Only","Any Language Is Fine","No Smoking or Drinking","","Any city in Karnataka is fine","No Smoking or Drinking","https://drive.google.com/open?id=10zboiY_hEG-7nQc4TJhzI5znbU6kMMWj|images/B20251119001_44.jpg","https://drive.google.com/open?id=191cokRdAR23IL2PZ7W9PNts_e6K9Jebe|images/B20251119001_45.jpg","https://drive.google.com/open?id=1wcmdSzs-o-f9Se0KvhtLv9uskAm9gL7b","I Agree","","","","","","","","","","","","","",],["G20251120001","11/20/2025 12:15:47","kvsn63@gmail.com","9844730248","Groom","Pramod K S","10/14/97","10:58:00 am","Bangalore","","","","","Kashyapa","Madhwa","Vyasaraja ","Degree, Masters, BE","IT","Hashedin by Delloitte","20","Sathyanarayana Rao K V","Retired","9844730248","Tumkur ","Sujatha K G","Home Maker","7892005498","Tumkur","Sisters","#203,1st Floor, Siri Paramount Apartment, Gowdanapalya, Bangalore - 560061","India","To Other Country","5' 9","BE in CS","Up to 4","No","No","Unmarried Only","India Only","Kannada Only","No Smoking or Drinking","","Any city in Karnataka is fine","No Smoking or Drinking","https://drive.google.com/open?id=1xdepKhlbY58LQu1NiJ8i_9e5Qri775Rn|images/G20251120001_44.jpg","https://drive.google.com/open?id=1BAa9PO4D7Ycwsm6yA07yP2xUGn-1-TfB|images/G20251120001_45.jpg","https://drive.google.com/open?id=1Is0Ku5fEVjPuKiZpn39oHv0r1WoxLS-O","I Agree","","","","","","","","","","","","","",],["B20251120002","11/20/2025 12:30:12","eliteestatesneha@gmail.com","9036580375","Bride","Sneha","4/8/96","7:50:00 am","Bangalore","","","","","Kaundinya","Smartha","Sringeri mata","Degree, ","Digital Marketing ","Orgorbit,Digital Marketing ","6L","Narayana ","Business ","9036580375","Bangalore ","Usha","Homemaker ","9036580375","Mandya","No Siblings","Chikkalasandra ","India","To India","5.7","BBA,PGD","Up to 4","No","Maybe","Unmarried Only","Can move to Abroad","Kannada Only","No Smoking or Drinking","","only Bengaluru","Occasionally Yes","https://drive.google.com/open?id=1YVBZzzi1Pntf58xtCRTjWKwPA4ltOj_h|images/B20251120002_44.jpg","https://drive.google.com/open?id=18ZYBSVSmkMDJT1ThFQL5UHHxgNkP2S6c|images/B20251120002_45.jpg","https://drive.google.com/open?id=16vUys-Dul2gbG25GhCEftqK8XDxt5NOC","I Agree","","","","","","","","","","","","","",],["B20251120003","11/20/2025 14:39:22","nravi.1042@gmail.com","9448393922","Bride","Manasa R","12/8/98","1:12:00 pm","Nagpur","","","","","Kashyapa","Smartha","Shankar Mutt- Hoysala Karnataka ","BE","IT","Cloud Engineer at Evertz ","15","Ravindra N","Civil Engineer","9448393922","Hassan","G S Shylashree ","HOD and Professor ","9663608339","","No Siblings","Jayanagar 9th block ","India","To India","5.5","B.E in ISE","Up to 4","Yes","Maybe","Unmarried Only","Will be Back in India","Any Language Is Fine","No Smoking or Drinking","Bengaluru","only Bengaluru","No Smoking or Drinking","https://drive.google.com/open?id=1v5xLfx1tqY55BgLcB8Da3seUWdV2c_ZF|images/B20251120003_44.jpg","https://drive.google.com/open?id=1K4wm-5_YwOqJ3Yzr74Ss-VOBGqfUGizg|images/B20251120003_45.jpg","","I Agree","","","","","","","","","","","","","",],["G20251120004","11/20/2025 17:31:32","rsuhasballal@gmail.com","9972645412","Groom","Suhas Ballal R ","8/4/95","1:15:00 am","Tumkur ","","","","","Vasishtha","Shivali","Puttige","BE","IT","Software Developer in Lighthouse House Asia Pacific ","21","Rajesh Ballal k","Business ","9972645412","Udupi","Pushpa p h","Retired","9972645412","Chitradurga","No Siblings","Srilakshminarayana r t Nagar 2nd cross Tumkur ","India","To India","5'10","Engineering ","Up to 7","No","Yes","Unmarried Only","India Only","Any Language Is Fine","No Smoking or Drinking","Tumkur","Any city in India is fine","No Smoking or Drinking","https://drive.google.com/open?id=1hwMkLWHsQYc0g00s8UhoAbtlRtAJ6Lxj|images/G20251120004_44.jpg","https://drive.google.com/open?id=1cYaFcbxtlKwgaxhtqLtcS36BPe-4aFUo|images/G20251120004_45.jpg","https://drive.google.com/open?id=12VryMPWUf2ysN-codoS5_j5k-67XJxKI","I Agree","","","","","","","","","","","","","",],["B20251120005","11/20/2025 17:51:22","yuvashree121@gmail.com","9916875826","Bride","Yuvashree TK","9/12/94","9:20:00 pm","Coimbatore","","","","","Vasishtha","SriVaishnava","Sri Ramanuja","Masters","Private Sector","Avery Dennison","confidential ","Karmega Kannan T R","Retired","9483902988","","Rekha T R","Retired","9916875826","","No Siblings","Mysore","India","To India","5.5","","Up to 4","Maybe","Yes","Unmarried Only","Can move to Abroad","Kannada Only","No Smoking or Drinking","Bengaluru","only Bengaluru","No Smoking or Drinking","https://drive.google.com/open?id=1evelwPelY2amEBG33Gftrbf60WROEv3C|images/B20251120005_44.jpg","https://drive.google.com/open?id=1FcRLSJH-h4-guKv6Jvgwqpf6nxzpPI_m|images/B20251120005_45.jpg","","I Agree","","","","","","","","","","","","","",],["B20251120006","11/20/2025 18:57:16","anushaani846@gmail.com","7975978318","Bride","Anusha N","6/28/98","3:05:00 am","Mulbagal ","","","","","Vasishtha","Smartha","Shankara Mata","BE","IT","Wells Fargo","USD","Nagraj Rao","Retired","9620601828","","Shoba Rani","Housewife ","9620601828","Mulbagal","Brothers","Kumbar Palya , kasaba street, Mulbagal, kolar(D)","Other Country","To India","5.3","","Up to 5","No","Yes","Unmarried Only","Already In Abroad","Kannada Only","No Smoking or Drinking","USA","Any city in Karnataka is fine","No Smoking or Drinking","https://drive.google.com/open?id=1OFtsY29JHrMg14AUIbtoTcB9AE0qjIW3|images/B20251120006_44.jpg","https://drive.google.com/open?id=1iDI_NmhSyydHysRjlXnJpZ6nMEhyKmjt|images/B20251120006_45.jpg","","I Agree","","","","","","","","","","","","","",],["G20251120007","11/20/2025 20:49:41","poornima143p@gmail.com","7338024143","Groom","Harish p","7/2/92","7:35:00 am","Bangalore","Never Married","ಪುಷ್ಯ (Pushya)","","ಕರ್ಕಾಟಕ - Cancer","Kaundinya","Smartha","Shringeri mutt","MBA","Own Business","CEO @platoon constructions","3500000","Late s pattabhiraman ","BBMP Contractor ","7338024143","Bangalore","AR Ramamani","Retired Teacher ","9986191434","Mysore","Sisters","Padmanabhanagar Bangalore","India","To India","5’4","BBM","Up to 8","Maybe","Yes","Unmarried Only","India Only","Any Language Is Fine","No Smoking or Drinking","Bengaluru","Any city in India is fine","Occasionally Yes","https://drive.google.com/open?id=1_PZNXJSsq5wYZN5nJz1ST1WsIbNDlMTo|images/G20251120007_44.jpg","https://drive.google.com/open?id=1F6yHC3jaStCl53uCJvS3rCrjtLb2xpUQ|images/G20251120007_45.jpg","https://drive.google.com/open?id=1Evfa1LN5OnlDqLk1Wccy687hoYzICg-y","I Agree","","","","","","","","","","","","","",],["B20251120001","11/20/2025 22:46:09","prabhaashoks1993@gmail.com","9480628511","Bride","Akhila","12/10/93","10:04:00 am","Bangalore","Never Married","ಸ್ವಾತಿ (Swati)","","ತುಲಾ - Libra","Atri","Madhwa","Bhimanakatte","BE, MBA","Private Sector","KPMG,Canada,Cyber security consultant ","Can$75k","S Ashok ","Retired Bank officer","9480628511","Mysore ","Prabha S","Homemaker","9480628511","Bangalore ","No Siblings","Madhav Bhavan, 369 Jhansi laxmi Bai Road  Mysore 570005","Other Country","To Other Country","5'4\"","BE in IP and MBA from smith Business school,Kingston,Canada","Up to 3","No","Yes","Unmarried Only","Already In Abroad","Kannada Only","No Smoking or Drinking","Toronto,Canada","Any city in India is fine","No Smoking or Drinking","https://drive.google.com/open?id=1pns3LWNTokFjo-CmeOD2IZ92Nk0nBYuN|images/B20251120001_44.jpg","https://drive.google.com/open?id=1ZHEIezapxKtwYJUvKiEcTcOXfASp6aH7|images/B20251120001_45.jpg","https://drive.google.com/open?id=1XgmGODWNZRebWBrOioU6LjNDEboxgetw","I Agree","","","","","","","","","","","","","",],["G20251212001","12/12/2025 21:37:42","smadhuri1997@gmail.com","8548966962","Groom","Madan S","5/10/95","10:30:00 am","Bangalore","Never Married","ಪೂರ್ವ ಫಲ್ಗುಣಿ (Purva Phalguni)","","ಸಿಂಹ - Leo","Vasishtha","Smartha","Sringeri matta ","MS","IT","Analog Devices as Design Engineer","will be disclosed later","ShivaKumar A V","Retired government Official","8548966962","Arkalagudu Hassan","Sudha S (Late)","-","9481476752","-","Sisters","Chikkalasandra , Uttarahalli , Bangalore ","Other Country","To India","5'5","MS in USA on Electronics and communication","Up to 6","Maybe","Yes","Unmarried Only","Already In Abroad","Any Language Is Fine","No Smoking or Drinking","USA - Boston","Any city in India is fine","No Smoking or Drinking","https://drive.google.com/open?id=1Sg6e_5fJniTtCBWbWhNTiO9_k_pb_zLc|images/G20251212001_44.jpg","https://drive.google.com/open?id=14QXBcK85Z0uTiCyy0qr6r88AQgNN6HD4|images/G20251212001_45.jpg","https://drive.google.com/open?id=1xhMxTBsdTpGr1B-bQ-_mfIhZOhoP8-n3","I Agree","","","","","","","","","","","","","",],["G20251212002","12/13/2025 0:08:58","pallavitatti02@gmail.com","00","Groom","Anantha Murthy ","6/24/91","2:30:00 am","Tumkur ","Never Married","ಅನುರಾಧಾ (Anuradha)","","ವೃಶ್ಚಿಕ - Scorpio","Kashyapa","Madhwa","Rayaramata ","Masters","Private Sector","VSN business solutions ","6 LPA","Late Narasimha murthy ","Rtd head constable","7760258251","Ittigi Huvinahadagali taluk ","Jayashri","Retd Head Mistress ","7259544858","Ittigi ","Brothers"," #28, Venugopala layout, 3rd main 3rd cross, Vidyaranyapura last bus stop, Vidyaranyapura ","India","To India","6 feet","MBA in finance","Up to 5","No","Yes","Unmarried Only","India Only","Kannada Only","No Smoking or Drinking","Bengaluru","Any city in Karnataka is fine","No Smoking or Drinking","https://drive.google.com/open?id=1YhD6gnawg8s61XcBOCzcnzkxNOSb3mSO|images/G20251212002_44.jpg","https://drive.google.com/open?id=1Qb1tUOx4ZZFC4w8lJg-ZLOJ5uQFv1jUy|images/G20251212002_45.jpg","https://drive.google.com/open?id=1xVwvVc48XliVVPFSiTUSd2ciatO542-F","I Agree","","","","","","","","","","","","","",],["G20251213001","12/13/2025 21:53:39","nagamanimd69@gmail.com","9740326495","Groom","Arun Kashyap","5/14/93","1:50:00 am","Doddaballapura ","Never Married","ಧನಿಷ್ಠ (Dhanishtha)","","ಕುಂಭ - Aquarius","Kashyapa","Smartha","ಶೃಂಗೇರಿ ","Masters","Private Sector","Team Leader at JP Morgan Chase & Co","13","Ramachandra M D","Retired ","9535398563","Motaganahalli","Shantha","Home maker","7829343212","Motaganahalli","Sisters","ITI layout,  Jp nagar phase 1, bangalore","India","To India","6","MBA","Up to 8","Maybe","Yes","Unmarried Only","India Only","Kannada Only","No Smoking or Drinking","Bengaluru","Any city in Karnataka is fine","No Smoking or Drinking","https://drive.google.com/open?id=1krRITldpUvyP_oq6mQGsrWRvvjYfmxkb|images/G20251213001_44.jpg","https://drive.google.com/open?id=1CWg7SilH-pQ4PM9fsa3fF4SZi0TxHnGH|images/G20251213001_45.jpg","","I Agree","","","","","","","","","","","","","",],["G20251214001","12/14/2025 10:27:07","santucgcs@gmail.com","9739714623","Groom","ಸಂತೋಷ ","11/10/82","7:00:00 am","ಮೈಸೂರ್ ","Never Married","ಸ್ವಾತಿ (Swati)","","ತುಲಾ - Libra","Shandilya","Madhwa","ಉತ್ತರದಿ ","Degree","Private Sector","Datar distributors mondelez food India pvt ltd","3to 4lack","C s gopinath ","Superintendent ","9739714623","Bangalore ","Padmalatha ","House wife","9739714623","Shimoga ","Sisters","No 49 ad block 4th mn srirampura Bangalore ","India","To India","5.7","B.A","Up to 3","No","Yes","Unmarried Only","India Only","Kannada Only","Occasionally Yes","Bengaluru","Any city in Karnataka is fine","No Smoking or Drinking","https://drive.google.com/open?id=1NeS3tAkkHKe3Y_cyKHum2xTZLg12nK5y|images/G20251214001_44.jpg","https://drive.google.com/open?id=1j2U0TBCZH34WsuTSU4RRzAhEVB4FL5YQ|images/G20251214001_45.jpg","","I Agree","","","","","","","","","","","","","",],["G20251216001","12/16/2025 16:58:29","natarajks28@gmail.com","9008710060","Groom","NITHIN KASHYAP ","10/10/98","3:38:00 am","SHIMOGA ","Never Married","ರೋಹಿಣಿ (Rohini)","","ವೃಷಭ - Taurus","Kashyapa","Smartha","Shankar mata","BE","IT","Clarivate  senior software developer ","19 lakh/year","NATARAJ ","Lecturer ","7349709235","Mysore ","CHAITHRA ","Home maker","7349709235","Shimoga ","Brothers","Mysore ","India","To India","5'11","BE","Up to 3","No","Yes","Unmarried Only","India Only","Any Language Is Fine","No Smoking or Drinking","Mysore ","Any city in Karnataka is fine","No Smoking or Drinking","https://drive.google.com/open?id=1gDa-ib6gmtqbn5rFGmnlOLDn3J6c3KRg|images/G20251216001_44.jpg","https://drive.google.com/open?id=11IfOANfxLVOqb4QDU19L6NepPIF83mOo|images/G20251216001_45.jpg","","I Agree","","","","","","","","","","","","","",],["G20251216002","12/16/2025 16:58:48","venkateshshanbogh@gmail.com","8095608281","Groom","Venkatesha","10/28/94","10:15:00 pm","Sira","Never Married","ಆಶ್ಲೇಷ (Ashlesha)","","ಕರ್ಕಾಟಕ - Cancer","Gautama","Smartha","Shringeri","CA Inter","IT","XY Retail India Pvt Ltd and Finance Manager","15,00,000","Suresh","Farmer","7899523327","","Nagarathna","Home maker","9743101484","","Sisters","Giri Nagar, Bengaluru","India","To India","5'5","","Up to 7","Yes","Yes","Unmarried Only","India Only","Kannada Only","No Smoking or Drinking","Bengaluru","Any city in Karnataka is fine","No Smoking or Drinking","https://drive.google.com/open?id=16U1HyDfmVjPkbLELB_bDI3lFv9ELXUwq|images/G20251216002_44.jpg","https://drive.google.com/open?id=1EsaLTWGtMDIhRFUdRH-5Lh8G3DTjD7HN|images/G20251216002_45.jpg","https://drive.google.com/open?id=1qfK1DLqSk4MGXfQY5AdVkf3AgaNEiBWj","I Agree","","","","","","","","","","","","","",],];
    const PHOTO_INDICES = [44, 45];
    const EXCLUDED_INDICES = [0, 1, 2, 3, 4, 19, 22, 26, 29, 47];
    const HOROSCOPE_INDEX = 46;
    const TYPE_INDEX = 4;
    const cols = db[0];

    const getColIndex = (name) => cols.findIndex(h => h.toLowerCase().includes(name.toLowerCase()));

    let currentFilter = 'all';

    // Connectivity Status Handler
    function updateStatus() {
        const statusDiv = document.getElementById('connection-status');
        if (navigator.onLine) {
            statusDiv.innerHTML = "● Online";
            statusDiv.className = "online-dot";
        } else {
            statusDiv.innerHTML = "● Offline Mode";
            statusDiv.className = "offline-dot";
        }
    }
    window.addEventListener('online', updateStatus);
    window.addEventListener('offline', updateStatus);
    updateStatus();

    function filterType(type) {
        currentFilter = type;
        document.querySelectorAll('.stat-item').forEach(el => el.classList.remove('active-filter'));
        if(type === 'all') document.getElementById('btnAll').classList.add('active-filter');
        else if(type === 'groom') document.getElementById('btnGroom').classList.add('active-filter');
        else if(type === 'bride') document.getElementById('btnBride').classList.add('active-filter');
        search();
    }

    function formatDate(dateStr) {
    if (!dateStr || dateStr.length < 5) return "N/A";

    const parts = dateStr.split(/[\/\-]/);
    if (parts.length !== 3) return dateStr;

    let month = parts[0].padStart(2, '0');
    let day = parts[1].padStart(2, '0');
    let year = parts[2];

    if (year.length === 2) {
        year = (parseInt(year) > 40 ? "19" : "20") + year;
    }

    return `${day}-${month}-${year}`;
}

    function initGallery() {
    let container = document.getElementById('cardContainer');

    // 1. Get the column indices (renamed to end with 'Idx' for clarity)
    const nameIdx = getColIndex("Name");
    const subCasteIdx = getColIndex("Sub Caste");
    const eduIdx = getColIndex("Education"); // Added missing semicolon
    const gothraIdx = getColIndex("Gothra");
    const cityIdx = getColIndex("If currently not staying in Bengaluru Please mention the city");
    const jobIdx = getColIndex("Currently Working-In(Company Name) and As(Position)");
    const dobIdx = getColIndex("Date of birth");

    let html = '';
    let grooms = 0, brides = 0;

    for (let i = 1; i < db.length; i++) {
        let row = db[i];

        // 2. Extract values using the indices
        let name = row[nameIdx] || "No Name";
        let subCasteVal = row[subCasteIdx] || "N/A";
        let gothraVal = row[gothraIdx] || "N/A";
        let eduVal = row[eduIdx] || "Unknown";
        let jobVal = row[jobIdx] || "Not Specified";
        let cityVal = row[cityIdx] || "Unknown";
        let dobVal = row[dobIdx] || "Unknown";
        let formattedDob = formatDate(dobVal);

        let typeClass = 'none';
        if(TYPE_INDEX !== -1 && row[TYPE_INDEX]) {
            let val = row[TYPE_INDEX].toLowerCase();
            if(val.includes('groom')) { typeClass = 'groom'; grooms++; }
            else if(val.includes('bride')) { typeClass = 'bride'; brides++; }
        }

        // 3. Build the card HTML
        html += `
            <div class="card card-${typeClass}" data-type="${typeClass}" onclick="showDetail(${i})">
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom:8px;">
                    <h3>${name}</h3>
                    <span style="background: rgba(0,0,0,0.06); padding: 3px 10px; border-radius: 15px; font-size: 0.95em; font-weight: bold;">
                        ${subCasteVal}
                    </span>
                </div>
                <p><span class="material-symbols-outlined">groups</span> ${gothraVal}</p>
                <p><span class="material-symbols-outlined">date_range</span> ${formattedDob}</p>
                <div style="margin-top: 10px; border-top: 1px solid #f0f0f0; padding-top: 10px;">
                    <p><span class="material-symbols-outlined">work</span> ${jobVal}</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; gap: 10px; margin-top: 5px; color: #666; font-size: 0.85em;">
                <p style="margin: 0; display: flex; align-items: center; gap: 4px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                    <span class="material-symbols-outlined" style="font-size: 25px;">school</span> ${eduVal}
                </p>
                <p style="margin: 0; display: flex; align-items: center; gap: 4px; flex-shrink: 0;">
                    <span class="material-symbols-outlined" style="font-size: 25px;">location_on</span> ${cityVal}
                </p>
            </div>
        </div>
            </div>`;
    }

    container.innerHTML = html;
    document.getElementById('btnGroom').innerText = `Grooms: ${grooms}`;
    document.getElementById('btnBride').innerText = `Brides: ${brides}`;
}

    function showDetail(idx) {
        const row = db[idx];
        let h = '<div onclick="showGallery()" style="color:#2196F3; cursor:pointer; font-weight:bold; margin-bottom:20px; display:flex; align-items:center; gap:5px;"><span class="material-symbols-outlined">arrow_back</span> Back</div>';

        // Media Grid Logic with Fallback
        h += '<div class="media-grid">';
        PHOTO_INDICES.forEach(pIdx => {
            let rawData = row[pIdx];
            if(!rawData || rawData.length < 5) return;

            let [remoteUrl, localUrl] = rawData.split('|');

            if(remoteUrl.includes('drive.google.com')) {
                let id = remoteUrl.match(/[-\w]{25,}/);
                if(id) remoteUrl = `https://drive.google.com/thumbnail?id=${id[0]}&sz=s0`;
            }

            h += `<img src="${remoteUrl}"
                       class="detail-card-img"
                       onerror="this.onerror=null; this.src='${localUrl}';"
                       onclick="event.stopPropagation(); openModal(this.src)">`;
        });
        h += '</div>';

        if(HOROSCOPE_INDEX !== -1 && row[HOROSCOPE_INDEX] && row[HOROSCOPE_INDEX].length > 10) {
            h += `<a href="${row[HOROSCOPE_INDEX]}" target="_blank" class="horoscope-btn" style="display:flex; align-items:center; justify-content:center; gap:10px;">
                    <span class="material-symbols-outlined">description</span> View Horoscope
                  </a>`;
        }

        // Data Rows
        for(let i=0; i<cols.length; i++) {
            if(PHOTO_INDICES.includes(i) || i === HOROSCOPE_INDEX || EXCLUDED_INDICES.includes(i)) continue;
            let label = cols[i];
            let val = row[i] ? row[i].trim() : "";
            if (label.toLowerCase().includes("date of birth") || label.toLowerCase().includes("dob")) { val = formatDate(val); }
            if(val !== "" && val !== "-" && val !== "#") {
                h += `<div class="row"><div class="label">${cols[i]}</div><div class="value">${val}</div></div>`;
            }
        }

        document.getElementById('detailView').innerHTML = h;
        document.getElementById('galleryPage').style.display = 'none';
        document.getElementById('detailView').style.display = 'block';
        window.scrollTo(0,0);
    }

    function showGallery() {
        document.getElementById('detailView').style.display = 'none';
        document.getElementById('galleryPage').style.display = 'block';
    }

    function openModal(src) {
        const modal = document.getElementById('imgModal');
        const modalImg = document.getElementById('fullImg');
        modal.style.display = "flex";
        modalImg.src = src;
        document.body.style.overflow = "hidden";
    }

    function closeModal() {
        document.getElementById('imgModal').style.display = "none";
        document.body.style.overflow = "auto";
    }

    function search() {
        let val = document.getElementById('search').value.toLowerCase();
        let cards = document.getElementsByClassName('card');
        for (let c of cards) {
            const matchesSearch = c.innerText.toLowerCase().includes(val);
            const cardType = c.getAttribute('data-type');
            const matchesFilter = (currentFilter === 'all' || cardType === currentFilter);
            c.style.display = (matchesSearch && matchesFilter) ? '' : 'none';
        }
    }

    initGallery();
</script>
</body>
</html>